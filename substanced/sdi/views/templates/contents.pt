<div metal:use-macro="sdi_h.macros()['master']">

  <div tal:omit-tag="" metal:fill-slot="head-more">
    <!-- slickgrid -->
    <script src="${request.static_url('substanced.sdi:static/js/slickgrid.upstream.js')}" type="text/javascript"></script>
    <script src="${request.static_url('substanced.sdi:static/js/slickgrid-config.js')}" type="text/javascript"></script>
    <link href="${request.static_url('substanced.sdi:static/css/slick.grid.upstream.css')}" rel="stylesheet" />
    <link href="${request.static_url('substanced.sdi:static/css/sdi_slickgrid.css')}" rel="stylesheet" />
  </div>

  <div metal:fill-slot="main">
    <div class="container-fluid">
    <form action="@@contents" method="POST">


      <h2 tal:condition="not items">No items</h2>

      <div tal:condition="items">
      <div id="sdi-contents-table-sg" class="slickgrid-wrapper"
          style="width:100%;height:400px"></div> <!-- << move these styles to css -->
      <script type="text/javascript">
          jQuery(function ($) {
              $('#sdi-contents-table-sg').slickgrid(${slickgrid_wrapper_options});
          });
      </script>

      <div class="clearfix">
      </div>

      <fieldset>
      <input type="hidden" name="csrf_token" 
             value="${request.session.get_csrf_token()}"/>

      <div class="form-actions btn-toolbar">

        <div tal:repeat="group buttons"
           class="${group['type']=='group' and 'btn-group' or 'btn-single'}">
            <button tal:repeat="button group['buttons']"
                    id="${button['id']}"
                    name="${button['name']}"
                    class="btn ${button['class']}"
                    value="${button['value']}"
                    type="submit"
                    >
            ${button['text']}
            </button>
        </div>

        <tal:block tal:condition="'tocopy' not in request.session and 'tomove' not in request.session">
        <div class="btn-group pull-right" tal:condition="addables">
          <a class="btn btn-primary" 
             href="${request.mgmt_path(context, '@@add')}"><i 
             class="icon-plus-sign icon-white"></i>Add</a>
          <a class="btn btn-primary dropdown-toggle" 
              data-toggle="dropdown" href="#"><span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li tal:repeat="addable addables">
               <a href="${addable['url']}"><i 
              class="${addable['icon']}"></i> ${addable['type_name']}</a></li>
          </ul>
        </div>
        </tal:block>

      </div>
      </fieldset>
    </form>

  </div>
  </div>

</div>
